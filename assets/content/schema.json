{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "IPlay Level Content Schema",
  "description": "Schema for learning level content in IPlay app",
  "type": "object",
  "required": [
    "levelId",
    "realmId",
    "levelNumber",
    "name",
    "difficulty",
    "xpReward",
    "estimatedMinutes",
    "contentBlocks",
    "keyTakeaways",
    "quizQuestions",
    "passingScore",
    "version",
    "updatedAt"
  ],
  "properties": {
    "levelId": {
      "type": "string",
      "description": "Unique identifier for the level (e.g., 'copyright_level_1')",
      "pattern": "^[a-z_]+_level_[0-9]+$"
    },
    "realmId": {
      "type": "string",
      "description": "Identifier for the realm (e.g., 'copyright', 'trademark')",
      "enum": ["copyright", "trademark", "patent", "industrial_design", "gi", "trade_secrets"]
    },
    "levelNumber": {
      "type": "integer",
      "description": "Sequential level number within the realm",
      "minimum": 1
    },
    "name": {
      "type": "string",
      "description": "Display name of the level",
      "minLength": 1,
      "maxLength": 100
    },
    "difficulty": {
      "type": "string",
      "description": "Difficulty level",
      "enum": ["Basic", "Intermediate", "Advanced"]
    },
    "xpReward": {
      "type": "integer",
      "description": "XP awarded for completing the level",
      "minimum": 50,
      "maximum": 500
    },
    "estimatedMinutes": {
      "type": "integer",
      "description": "Estimated time to complete in minutes",
      "minimum": 5,
      "maximum": 60
    },
    "videoUrl": {
      "type": "string",
      "description": "YouTube video URL or embed ID (optional)",
      "pattern": "^(https?://|[a-zA-Z0-9_-]{11})"
    },
    "videoDuration": {
      "type": "integer",
      "description": "Video duration in seconds (optional)",
      "minimum": 0
    },
    "contentBlocks": {
      "type": "array",
      "description": "Array of content blocks for the level",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["type", "content"],
        "properties": {
          "type": {
            "type": "string",
            "description": "Type of content block",
            "enum": ["text", "image", "video", "example", "case_study", "summary"]
          },
          "content": {
            "type": "string",
            "description": "Content text or URL"
          },
          "caption": {
            "type": "string",
            "description": "Optional caption for images/videos"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata for the content block",
            "properties": {
              "title": {
                "type": "string"
              },
              "source": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "keyTakeaways": {
      "type": "array",
      "description": "Key learning points from the level",
      "minItems": 3,
      "maxItems": 7,
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 200
      }
    },
    "quizQuestions": {
      "type": "array",
      "description": "Quiz questions for the level",
      "minItems": 5,
      "maxItems": 8,
      "items": {
        "type": "object",
        "required": ["question", "options", "correctIndex", "explanation"],
        "properties": {
          "question": {
            "type": "string",
            "description": "The quiz question",
            "minLength": 10,
            "maxLength": 300
          },
          "options": {
            "type": "array",
            "description": "Answer options",
            "minItems": 4,
            "maxItems": 4,
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 150
            }
          },
          "correctIndex": {
            "type": "integer",
            "description": "Index of the correct answer (0-3)",
            "minimum": 0,
            "maximum": 3
          },
          "explanation": {
            "type": "string",
            "description": "Explanation of the correct answer",
            "minLength": 20,
            "maxLength": 500
          }
        }
      }
    },
    "passingScore": {
      "type": "integer",
      "description": "Minimum percentage required to pass (typically 60)",
      "minimum": 0,
      "maximum": 100
    },
    "version": {
      "type": "string",
      "description": "Content version (semantic versioning)",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "updatedAt": {
      "type": "string",
      "description": "ISO 8601 timestamp of last update",
      "format": "date-time"
    }
  }
}
